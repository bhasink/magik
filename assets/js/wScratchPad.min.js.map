{"version":3,"sources":["wScratchPad.min.js"],"names":["a","b","c","$el","options","init","enabled","_generate","prototype","support","canvas","document","createElement","ctx","getContext","css","$img","$","position","width","height","$scratchpad","bindMobileEvents","mousedown","proxy","canvasOffset","offset","scratch","_scratchFunc","mousemove","mouseup","_setOptions","append","reset","Math","ceil","innerWidth","d","innerHeight","e","window","devicePixelRatio","pixels","attr","setAttribute","scale","hide","bg","charAt","fg","fillStyle","beginPath","rect","fill","show","Image","load","drawImage","clear","clearRect","enable","destroy","children","remove","removeData","toUpperCase","substring","setBg","setFg","setCursor","pageX","floor","left","pageY","top","realtime","apply","_scratchPercent","getImageData","data","length","_scratchDown","globalCompositeOperation","lineJoin","lineCap","strokeStyle","color","lineWidth","size","arc","PI","closePath","moveTo","_scratchMove","lineTo","stroke","_scratchUp","fn","wScratchPad","extend","f","g","h","i","j","k","push","each","defaults","scratchDown","scratchUp","scratchMove","cursor","on","changedTouches","originalEvent","targetTouches","type","preventDefault","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","target","dispatchEvent","jQuery"],"mappings":"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","sourcesContent":["/*! wScratchPad - v2.1.0 - 2014-04-14 */!function(a){\"use strict\";function b(b,c){this.$el=a(b),this.options=c,this.init=!1,this.enabled=!0,this._generate()}b.prototype={_generate:function(){return a.support.canvas?(this.canvas=document.createElement(\"canvas\"),this.ctx=this.canvas.getContext(\"2d\"),\"static\"===this.$el.css(\"position\")&&this.$el.css(\"position\",\"relative\"),this.$img = $('<img src=\"\"/>').css({position: 'absolute', width: '100%', height: '100%'}),this.$scratchpad=a(this.canvas).css({position:\"absolute\",width:\"100%\",height:\"100%\"}),this.$scratchpad.bindMobileEvents(),this.$scratchpad.mousedown(a.proxy(function(b){return this.enabled?(this.canvasOffset=a(this.canvas).offset(),this.scratch=!0,void this._scratchFunc(b,\"Down\")):!0},this)).mousemove(a.proxy(function(a){this.scratch&&this._scratchFunc(a,\"Move\")},this)).mouseup(a.proxy(function(a){this.scratch&&(this.scratch=!1,this._scratchFunc(a,\"Up\"))},this)),this._setOptions(),this.$el.append(this.$img).append(this.$scratchpad),this.init=!0,void this.reset()):(this.$el.append(\"Canvas is not supported in this browser.\"),!0)},reset:function(){var b=this,c=Math.ceil(this.$el.innerWidth()),d=Math.ceil(this.$el.innerHeight()),e=window.devicePixelRatio||1;this.pixels=c*d,this.$scratchpad.attr(\"width\",c).attr(\"height\",d),this.canvas.setAttribute(\"width\",c*e),this.canvas.setAttribute(\"height\",d*e),this.ctx.scale(e,e),this.pixels=c*e*d*e,this.$img.hide(),this.options.bg&&(\"#\"===this.options.bg.charAt(0)?this.$el.css(\"backgroundColor\",this.options.bg):(this.$el.css(\"backgroundColor\",\"\"),this.$img.attr(\"src\",this.options.bg))),this.options.fg&&(\"#\"===this.options.fg.charAt(0)?(this.ctx.fillStyle=this.options.fg,this.ctx.beginPath(),this.ctx.rect(0,0,c,d),this.ctx.fill(),this.$img.show()):a(new Image).attr(\"src\",this.options.fg).load(function(){b.ctx.drawImage(this,0,0,c,d),b.$img.show()}))},clear:function(){this.ctx.clearRect(0,0,Math.ceil(this.$el.innerWidth()),Math.ceil(this.$el.innerHeight()))},enable:function(a){this.enabled=a===!0?!0:!1},destroy:function(){this.$el.children().remove(),a.removeData(this.$el,\"wScratchPad\")},_setOptions:function(){var a,b;for(a in this.options)this.options[a]=this.$el.attr(\"data-\"+a)||this.options[a],b=\"set\"+a.charAt(0).toUpperCase()+a.substring(1),this[b]&&this[b](this.options[a])},setBg:function(){this.init&&this.reset()},setFg:function(){this.setBg()},setCursor:function(a){this.$el.css(\"cursor\",a)},_scratchFunc:function(a,b){a.pageX=Math.floor(a.pageX-this.canvasOffset.left),a.pageY=Math.floor(a.pageY-this.canvasOffset.top),this[\"_scratch\"+b](a),(this.options.realtime||\"Up\"===b)&&this.options[\"scratch\"+b]&&this.options[\"scratch\"+b].apply(this,[a,this._scratchPercent()])},_scratchPercent:function(){for(var a=0,b=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),c=0,d=b.data.length;d>c;c+=4)0===b.data[c]&&0===b.data[c+1]&&0===b.data[c+2]&&0===b.data[c+3]&&a++;return a/this.pixels*100},_scratchDown:function(a){this.ctx.globalCompositeOperation=\"destination-out\",this.ctx.lineJoin=\"round\",this.ctx.lineCap=\"round\",this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=this.options.size,this.ctx.beginPath(),this.ctx.arc(a.pageX,a.pageY,this.options.size/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(a.pageX,a.pageY)},_scratchMove:function(a){this.ctx.lineTo(a.pageX,a.pageY),this.ctx.stroke()},_scratchUp:function(){this.ctx.closePath()}},a.support.canvas=document.createElement(\"canvas\").getContext,a.fn.wScratchPad=function(c,d){function e(){var d=a.data(this,\"wScratchPad\");return d||(d=new b(this,a.extend(!0,{},c)),a.data(this,\"wScratchPad\",d)),d}if(\"string\"==typeof c){var f,g=[],h=(void 0!==d?\"set\":\"get\")+c.charAt(0).toUpperCase()+c.substring(1),i=function(){f.options[c]&&(f.options[c]=d),f[h]&&f[h].apply(f,[d])},j=function(){return f[h]?f[h].apply(f,[d]):f.options[c]?f.options[c]:void 0},k=function(){f=a.data(this,\"wScratchPad\"),f&&(f[c]?f[c].apply(f,[d]):void 0!==d?i():g.push(j()))};return this.each(k),g.length?1===g.length?g[0]:g:this}return c=a.extend({},a.fn.wScratchPad.defaults,c),this.each(e)},a.fn.wScratchPad.defaults={size:5,bg:\"#cacaca\",fg:\"#6699ff\",realtime:!0,scratchDown:null,scratchUp:null,scratchMove:null,cursor:\"crosshair\"},a.fn.bindMobileEvents=function(){a(this).on(\"touchstart touchmove touchend touchcancel\",function(a){var b=a.changedTouches||a.originalEvent.targetTouches,c=b[0],d=\"\";switch(a.type){case\"touchstart\":d=\"mousedown\";break;case\"touchmove\":d=\"mousemove\",a.preventDefault();break;case\"touchend\":d=\"mouseup\";break;default:return}var e=document.createEvent(\"MouseEvent\");e.initMouseEvent(d,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),c.target.dispatchEvent(e)})}}(jQuery);"]}